
### 开发者参与流程调研

Kubernetes是开源的，但许多从事该工作的人将其作为日常工作。为了避免强迫人们24小时有效地 "工作"，我们想围绕开发建立一些半正式的协议。希望这些规则能使事情进行得更顺利。如果你发现情况并非如此，请大声抱怨。

作为一个潜在的贡献者，我们欢迎你的改变和想法，无论在白天还是晚上，工作日、周末和假期的任何时候。请不要犹豫，提出一个问题或发送一个Pull Request。

请查看我们的社区指导原则，了解如何作为一个大团体创造伟大的代码。

初学者的信息可以在打开 Pull Request]和代码评审中找到。

对于贡献者资源的快速参考，我们有一个方便的贡献者小册子。

##### 沟通

与SIG主题相关的问题，最好是联系你的SIG。你的SIG能够比一般问题更快地帮助你。

对于一般的问题和故障排除，请使用标准的沟通渠道，并通过故障排除指南进行工作。

#### GitHub的工作流程

要检查代码的工作，请参考GitHub工作流程指南。

Pull Request的完整工作流程记录在此。

* Kubernetes专用的github工作流程。

该文件是全面而详细的，对于一个典型的Pull Request，我们将在这里涵盖初始和简单的用例。

#### 打开一个Pull Request

Pull Request通常被称为 "PR"。Kubernetes通常遵循标准的github Pull Request流程，但有一层额外的kubernetes特定（有时是SIG特定）的差异。

你会看到的第一个区别是，一个机器人会开始给你的PR贴上结构化的标签。

机器人也可能提出一些有用的建议，在你的PR中运行命令，以方便评审。

这些/命令选项可以在评论中输入以触发自动标签和通知。请参考其命令参考文档。

常见的新贡献者PR问题是:

* 在你的第一个PR之前没有正确签署CLA。请参阅 CLA 页面获取故障排除帮助，在某些情况下，你可能需要向 CNCF 提交一份票据来解决 CLA 问题。

* 为 PR 找到合适的 SIG 或评审员（参见代码评审部分），并遵循任何 SIG 或版本库的特定贡献指南（参见了解 SIG 部分）。

* 处理在你的PR上失败的测试案例，与你引入的修改无关（见Test Flakes）。

* 不遵循可扩展性的良好实践

* 在提交信息中包括提及（如@某人）和可以关闭问题的关键词（如fixes #xxxx）。

#### 代码评审

关于代码评审的重要性的简要描述，请阅读论代码评审。

代码评审有两个方面：给予和接受。

为了使你的PR更容易接受评审，考虑到评审者需要你:

* 遵循项目的编码规范

* 写好提交信息

* 将大的修改分解成一系列逻辑上较小的补丁，每个补丁都是容易理解的修改，并且总体上解决了一个更广泛的问题

* 给PR贴上适当的SIG和评审员的标签：要做到这一点，请阅读机器人发给你的信息，以指导你完成PR过程。

评审员，也就是提供评审的人，我们强烈鼓励他们重新审视行为准则以及社区的期望，他们必须超越自我，以促进一个合作、尊重的社区。在评审他人的PR时，《补丁评审的温柔艺术》建议采用一系列迭代的重点，旨在引导新的贡献者进行积极的合作，而不是一开始就把他们淹没在细微的差别中:

* 贡献背后的想法是否合理？

* 贡献的架构是否正确？

* 贡献是否经过精加工？

注意：如果你的拉动请求没有得到足够的关注，你可以使用Slack上的#pr-reviews频道来帮助寻找评审者。

#### 最佳实践

* 编写清晰而有意义的git提交信息。

* 如果PR将完全修复一个特定的问题，在PR正文中包括修复#123（其中123是PR将修复的特定问题编号。当PR被合并时，这将自动关闭该问题。

* 确保你在git提交信息中不包括@mentions或fixes关键字。这些应该包含在PR正文中。

* 当你为小的改动（比如修正错别字、风格变化或语法修正）做PR时，请压制你的提交，以便我们能保持一个更干净的git历史。

* 请确保你包含一个清晰详细的PR描述，解释修改的原因，并确保有足够的信息让审核者理解你的PR。

* 补充阅读:

    * https://chris.beams.io/posts/git-commit/.

    * https://github.com/blog/1506-closing-issues-via-pull-requests

    * https://davidwalsh.name/squash-commits-git

    * https://mtlynch.io/code-review-love/

#### 测试

测试是所有贡献者的责任，部分由所有SIG拥有，但也由sig-testing协调。更多信息请参考《测试指南》。

有多种类型的测试。测试代码的位置随类型的不同而不同，成功运行测试所需的环境的具体情况也是如此:

* 单元测试。这些测试确认一个特定功能的行为是否符合预期。Golang包括通过测试包进行单元测试的本地能力。单元测试的源代码可以在一个给定的包内的相应源代码旁边找到。例如：在kubernetes/cmd/kubeadm/app/util/version.go中定义的函数将在kubernetes/cmd/kubeadm/app/util/version_test.go中有单元测试。这些都可以由任何开发人员在任何操作系统上轻松地在本地运行。

* 集成。这些测试涵盖了软件包组件的交互，或者kubernetes组件和其他一些非kubernetes系统资源（例如：etcd）之间的交互。一个例子是测试一段代码是否可以正确地存储数据到etcd或从etcd中检索数据。集成测试存储在kubernetes/test/integration/。运行这些测试可能需要开发人员在其开发系统上设置额外的功能。

* 端到端（"e2e"）。这些是对整体系统行为和一致性的广泛测试。这些测试更复杂，因为它们需要从被测试的源头建立一个功能性的kubernetes集群。在kubernetes/test/e2e/中可以找到一份单独的文件，详细说明e2e测试和测试案例本身。

* 一致性。这是一组测试案例，目前是集成/e2e测试的一个子集，由架构组批准，以定义所有Kubernetes部署必须支持的核心互操作特性。关于一致性测试的更多信息，请参见一致性测试文件。

持续集成将运行这些测试，可以作为PR的预提交，也可以作为针对主/发布分支的后提交，或者两者都是。
结果会出现在testgrid上。

sig-testing负责该官方基础设施和CI。相关的自动化在test-infra repo中被跟踪。如果你想在自己的基础设施上运行e2e测试，kubetest是一个机制。

#### 安全问题

* 安全发布页 - 概述了处理安全问题的程序。

* 安全和披露信息 - 如果你想报告一个安全漏洞，请查看此页面。

#### 文档

* 贡献于文档

#### 问题管理或分流

你有没有注意过未解决的问题的总数？帮助管理或分流这些开放的问题可以是一个很大的贡献，也是一个了解项目各个领域的好机会。分流是我们用来描述为GitHub问题添加多种类型的描述性标签的过程，以加快将问题转交给正确的人。更多信息请参考《问题分流指南》。